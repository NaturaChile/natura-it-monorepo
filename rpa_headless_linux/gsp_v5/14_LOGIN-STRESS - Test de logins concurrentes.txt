2026-02-25T19:58:27.8788548Z ##[group]Run $workers = [int]"3"
2026-02-25T19:58:27.8790029Z [36;1m$workers = [int]"3"[0m
2026-02-25T19:58:27.8790699Z [36;1m$concurrency = [int]"3"[0m
2026-02-25T19:58:27.8791493Z [36;1m$total = $workers * $concurrency[0m
2026-02-25T19:58:27.8792036Z [36;1m[0m
2026-02-25T19:58:27.8792752Z [36;1mWrite-Host "════════════════════════════════════════"[0m
2026-02-25T19:58:27.8793540Z [36;1mWrite-Host "  GSP Bot v5 - LOGIN STRESS TEST"[0m
2026-02-25T19:58:27.8794147Z [36;1mWrite-Host "  Workers: $workers"[0m
2026-02-25T19:58:27.8794898Z [36;1mWrite-Host "  Concurrency/worker: $concurrency"[0m
2026-02-25T19:58:27.8795555Z [36;1mWrite-Host "  Total logins: $total"[0m
2026-02-25T19:58:27.8796250Z [36;1mWrite-Host "════════════════════════════════════════"[0m
2026-02-25T19:58:27.8796924Z [36;1m[0m
2026-02-25T19:58:27.8797361Z [36;1mWrite-Host ""[0m
2026-02-25T19:58:27.8798122Z [36;1mWrite-Host "[1/3] Lanzando $total logins concurrentes via API..."[0m
2026-02-25T19:58:27.8799105Z [36;1mtry {[0m
2026-02-25T19:58:27.8800172Z [36;1m  $response = Invoke-RestMethod -Method POST -Uri "http://localhost:8000/tests/login-stress" -TimeoutSec 30 -ErrorAction Stop[0m
2026-02-25T19:58:27.8801202Z [36;1m  Write-Host "[OK] Test lanzado:"[0m
2026-02-25T19:58:27.8801839Z [36;1m  $response | ConvertTo-Json -Depth 5 | Write-Host[0m
2026-02-25T19:58:27.8802464Z [36;1m[0m
2026-02-25T19:58:27.8803093Z [36;1m  $taskIds = ($response.tasks | ForEach-Object { $_.task_id }) -join ","[0m
2026-02-25T19:58:27.8803871Z [36;1m[0m
2026-02-25T19:58:27.8804524Z [36;1m  Write-Host ""[0m
2026-02-25T19:58:27.8805187Z [36;1m  Write-Host "[2/3] Esperando resultados (max 120s)..."[0m
2026-02-25T19:58:27.8806677Z [36;1m  $maxWait = 120[0m
2026-02-25T19:58:27.8807382Z [36;1m  $elapsed = 0[0m
2026-02-25T19:58:27.8807978Z [36;1m[0m
2026-02-25T19:58:27.8808613Z [36;1m  while ($elapsed -lt $maxWait) {[0m
2026-02-25T19:58:27.8810713Z [36;1m    Start-Sleep -Seconds 10[0m
2026-02-25T19:58:27.8811245Z [36;1m    $elapsed += 10[0m
2026-02-25T19:58:27.8811975Z [36;1m    try {[0m
2026-02-25T19:58:27.8812914Z [36;1m      $results = Invoke-RestMethod -Uri "http://localhost:8000/tests/login-stress/results?task_ids=$taskIds" -TimeoutSec 10 -ErrorAction Stop[0m
2026-02-25T19:58:27.8813996Z [36;1m      $pending = $results.in_progress[0m
2026-02-25T19:58:27.8814693Z [36;1m      $succeeded = $results.succeeded[0m
2026-02-25T19:58:27.8815267Z [36;1m      $failed = $results.failed[0m
2026-02-25T19:58:27.8815829Z [36;1m[0m
2026-02-25T19:58:27.8816699Z [36;1m      Write-Host "[${elapsed}s] Succeeded: $succeeded | Failed: $failed | Pending: $pending"[0m
2026-02-25T19:58:27.8817858Z [36;1m[0m
2026-02-25T19:58:27.8818343Z [36;1m      if ($pending -eq 0) {[0m
2026-02-25T19:58:27.8818894Z [36;1m        Write-Host ""[0m
2026-02-25T19:58:27.8819454Z [36;1m        Write-Host "[3/3] Resultados finales:"[0m
2026-02-25T19:58:27.8820208Z [36;1m        $results | ConvertTo-Json -Depth 5 | Write-Host[0m
2026-02-25T19:58:27.8820812Z [36;1m        break[0m
2026-02-25T19:58:27.8821257Z [36;1m      }[0m
2026-02-25T19:58:27.8821706Z [36;1m    } catch {[0m
2026-02-25T19:58:27.8822295Z [36;1m      Write-Host "[${elapsed}s] Esperando respuesta del API..."[0m
2026-02-25T19:58:27.8822968Z [36;1m    }[0m
2026-02-25T19:58:27.8823569Z [36;1m  }[0m
2026-02-25T19:58:27.8824128Z [36;1m[0m
2026-02-25T19:58:27.8824623Z [36;1m  if ($elapsed -ge $maxWait) {[0m
2026-02-25T19:58:27.8825422Z [36;1m    Write-Host "[WARN] Timeout alcanzado. Revisa Flower para resultados completos."[0m
2026-02-25T19:58:27.8826048Z [36;1m  }[0m
2026-02-25T19:58:27.8826453Z [36;1m} catch {[0m
2026-02-25T19:58:27.8827154Z [36;1m  Write-Host "[ERROR] No se pudo conectar a la API: $($_.Exception.Message)"[0m
2026-02-25T19:58:27.8827964Z [36;1m  Write-Host "[INFO] Asegurate de que los servicios esten corriendo (accion: deploy)"[0m
2026-02-25T19:58:27.8828717Z [36;1m  exit 1[0m
2026-02-25T19:58:27.8834883Z [36;1m}[0m
2026-02-25T19:58:27.8882214Z shell: C:\WINDOWS\System32\WindowsPowerShell\v1.0\powershell.EXE -command ". '{0}'"
2026-02-25T19:58:27.8883080Z env:
2026-02-25T19:58:27.8883540Z   COMPOSE_DIR: rpa_headless_linux/gsp_v5
2026-02-25T19:58:27.8884341Z   GSP_USER_CODE: ***
2026-02-25T19:58:27.8884769Z   GSP_PASSWORD: ***
2026-02-25T19:58:27.8885206Z   POSTGRES_PASSWORD: ***
2026-02-25T19:58:27.8885581Z   FLOWER_BASIC_AUTH: ***
2026-02-25T19:58:27.8885939Z   REDIS_PASSWORD: ***
2026-02-25T19:58:27.8886276Z   WORKER_COUNT: 3
2026-02-25T19:58:27.8886668Z   CELERY_CONCURRENCY: 3
2026-02-25T19:58:27.8887117Z   CELERY_MAX_RETRIES: 3
2026-02-25T19:58:27.8887427Z   CELERY_RETRY_DELAY: 30
2026-02-25T19:58:27.8887845Z   PLAYWRIGHT_HEADLESS: true
2026-02-25T19:58:27.8888243Z   PLAYWRIGHT_TIMEOUT: 60000
2026-02-25T19:58:27.8888592Z   PLAYWRIGHT_SLOW_MO: 100
2026-02-25T19:58:27.8889086Z   APP_ENV: production
2026-02-25T19:58:27.8889462Z   LOG_LEVEL: INFO
2026-02-25T19:58:27.8889794Z   LOG_FORMAT: json
2026-02-25T19:58:27.8890118Z ##[endgroup]
2026-02-25T19:58:28.5598471Z â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2026-02-25T19:58:28.5622123Z   GSP Bot v5 - LOGIN STRESS TEST
2026-02-25T19:58:28.5659322Z   Workers: 3
2026-02-25T19:58:28.5679830Z   Concurrency/worker: 3
2026-02-25T19:58:28.5705121Z   Total logins: 9
2026-02-25T19:58:28.5725484Z â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2026-02-25T19:58:28.5733659Z 
2026-02-25T19:58:28.5757774Z [1/3] Lanzando 9 logins concurrentes via API...
2026-02-25T19:58:32.7493582Z [ERROR] No se pudo conectar a la API: No es posible conectar con el servidor remoto
2026-02-25T19:58:32.7517902Z [INFO] Asegurate de que los servicios esten corriendo (accion: deploy)
2026-02-25T19:58:32.7933344Z ##[error]Process completed with exit code 1.
